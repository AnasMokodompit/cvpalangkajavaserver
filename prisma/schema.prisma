// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Roles {
  id    Int     @id @default(autoincrement())
  name  String
  users Users[]
}

model Users {
  id                  Int                   @id @default(autoincrement())
  name                String
  email               String                @unique
  password            String
  nomor_hp            String
  alamat              String
  token               String?
  roles               Roles?                @relation(fields: [rolesId], references: [id])
  rolesId             Int
  orders              Orders[]
  reviewevUserProduct ReviewevUserProduct[]
  product_Orders      Product_Orders[]
}

model KomentarKeKontakKami {
  id           Int    @id @default(autoincrement())
  nama_lengkap String
  email        String
  pesan        String @db.Text
}

model ReviewevUserProduct {
  id          Int       @id @default(autoincrement())
  users       Users?    @relation(fields: [user_id], references: [id])
  user_id     Int
  products    Products? @relation(fields: [products_id], references: [id])
  products_id Int
  bintang     Int
  komentar    String    @db.Text
  created_at  DateTime  @default(now())
  updated_at  DateTime  @default(now()) @updatedAt
}

model Products {
  id                  Int                   @id @default(autoincrement())
  name                String
  ukuran              String
  harga               Int
  Deskripsi_produk    String
  IsPermeter          Boolean @default(false)
  categories          Categories?           @relation(fields: [categoriesId], references: [id])
  categoriesId        Int?
  product_images      Product_images[]
  product_Orders      Product_Orders[]
  reviewevUserProduct ReviewevUserProduct[]
  bahanBakuProduk     BahanBakuProduk[]
}

model Product_images {
  id               Int      @id @default(autoincrement())
  name             String
  url_image        String
  product_image_id String?
  products         Products @relation(fields: [product_id], references: [id])
  product_id       Int
}

model Orders {
  id                Int              @id @default(autoincrement())
  nama_pemesan      String
  users             Users?           @relation(fields: [id_user], references: [id])
  id_user           Int
  no_hp             String
  alamat            String
  status            Boolean
  Price             Int
  jumlah            Int
  IsPembayaranDP    Boolean?         @default(false)
  IsPembayaranLunas Boolean?         @default(false)
  product_Orders    Product_Orders[]
  buktiBayar        BuktiBayar[]
}

model Product_Orders {
  id         Int      @id @default(autoincrement())
  orders     Orders   @relation(fields: [id_orders], references: [id])
  id_orders  Int
  products   Products @relation(fields: [id_product], references: [id])
  id_product Int
  users      Users?   @relation(fields: [id_user], references: [id])
  id_user    Int
  status     Int
  Price      Int
  jumlah     Int
  jumlah_meter      Int?
}

model BuktiBayar {
  id                     Int      @id @default(autoincrement())
  statusTransaksi        Boolean?
  picture_bukti_bayar    String?
  picture_bukti_bayar_id String?
  orders                 Orders   @relation(fields: [id_orders], references: [id])
  id_orders              Int
}

model Categories {
  id       Int        @id @default(autoincrement())
  name     String
  products Products[]
}

model JenisTransaksi {
  id                                        Int                                    @id @default(autoincrement())
  nama                                      String
  nama_akun_transaksi_dalam_jenis_transaksi NamaAkunTransaksiDalamJenisTransaksi[]
  Transaksi                                 Transaksi[]
}

model NamaAkunTransaksi {
  id                                        Int                                    @id @default(autoincrement())
  id_tipe_akun_transaksi                    Int?
  kode                                      String
  nama                                      String
  transaksi                                 Transaksi[]
  tipe_akun_transaksi                       TipeAkunTransaksi?                     @relation(fields: [id_tipe_akun_transaksi], references: [id])
  nama_akun_transaksi_dalam_jenis_transaksi NamaAkunTransaksiDalamJenisTransaksi[]
}

model TipeAkunTransaksi {
  id                   Int                 @id @default(autoincrement())
  nama                 String
  jenis_akun_transaksi NamaAkunTransaksi[]
}

model NamaAkunTransaksiDalamJenisTransaksi {
  id                     Int               @id @default(autoincrement())
  id_jenis_transaksi     Int
  id_nama_akun_transaksi Int
  jenis_akun_transaksi   JenisTransaksi    @relation(fields: [id_jenis_transaksi], references: [id])
  nama_akun_transaksi    NamaAkunTransaksi @relation(fields: [id_nama_akun_transaksi], references: [id])
}

// model KategoriAkunTransaksi {
//   id                   Int               @id @default(autoincrement())
//   id_jenis_transaksi   Int
//   kode_akun            String
//   nama                 String
//   jenis_akun_transaksi NamaAkunTransaksi @relation(fields: [id_jenis_transaksi], references: [id])
// }

model Transaksi {
  id                     Int                @id @default(autoincrement())
  id_jenis_transaksi     Int
  id_nama_akun_transaksi Int
  keterangan             String             @db.Text
  jumlah                 Int
  tanggal                DateTime           @default(now())
  jenis_transaksi        JenisTransaksi?    @relation(fields: [id_jenis_transaksi], references: [id])
  nama_akun_transaksi    NamaAkunTransaksi? @relation(fields: [id_nama_akun_transaksi], references: [id])
}

model Saldo {
  id         Int      @id @default(autoincrement())
  total_uang Int
  created_at DateTime @default(now())
  updated_at DateTime @default(now()) @updatedAt
}

model BahanBakuProduk {
  id            Int       @id @default(autoincrement())
  products      Products  @relation(fields: [id_produk], references: [id])
  id_produk     Int
  bahanBaku     BahanBaku @relation(fields: [id_bahan_baku], references: [id])
  id_bahan_baku Int
  jumlah        Int
  satuan        String
}

model BahanBaku {
  id                  Int                   @id @default(autoincrement())
  nama                String
  created_at          DateTime              @default(now())
  updated_at          DateTime              @default(now()) @updatedAt
  persediaanBahanBaku PersediaanBahanBaku[]
  bahanBakuProduk     BahanBakuProduk[]
}

model PersediaanBahanBaku {
  id            Int       @id @default(autoincrement())
  bahanBaku     BahanBaku @relation(fields: [id_bahan_baku], references: [id])
  id_bahan_baku Int
  jumlah        Int
  satuan        String
}
